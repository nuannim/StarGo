{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profile - StarGO</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <style>
        /* สไตล์สำหรับเมนูด้านข้างที่ถูกเลือก (active) */
        .sidebar-nav .nav-link.active {
            background-color: #FFF3CD;
            font-weight: bold;
            color: #333;
        }
        /* ปุ่มสีเหลืองที่ hover จะเข้มขึ้นเล็กน้อย */
        .btn-custom {
                background-color: #FFBC00;
                color: #000; /* ตัวอักษรสีดำ */
                transition: background-color 0.3s, transform 0.2s;
            }
    
            .btn-custom:hover {
                color: #000;
                text-decoration: none;
                box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            }
    </style>
</head>

<body style="padding-top: 100px;">
    {% if perms.app.delete_celebrities %}
        {% include 'nav_admin.html' %}
    {% else %}
        {% include 'nav.html' %}
    {% endif %}

    <!-- * ======== ส่วนเนื้อหาหลัก ======== -->
    <div class="container my-5">
        <!-- * 1. สร้างแถว (Row) หลักขึ้นมา -->
        <div class="row">

            <!-- * 2. สร้างคอลัมน์ด้านซ้าย (Sidebar) - กำหนดให้กว้าง 3/12 ส่วน -->
            <div class="col-md-3 border-end">
                <div class="sidebar-nav">
                    <!-- * ใช้ Nav Component ของ Bootstrap เพื่อสร้างเมนู -->
                    <!-- <div class="nav flex-column nav-pills">
                        <a href="./settings.html" class="nav-link active fs-5 mb-2">Edit Profile</a>
                        <a href="./settingsChangePassword.html" class="nav-link text-dark fs-5 mb-2">Change Password</a>
                        <a href="./settingsDeleteAccount.html" class="nav-link text-dark fs-5 mb-2">Delete Account</a>
                    </div> -->
                        {% include 'nav_profile.html' with active_page='profile_edit' %}
                </div>
            </div>

            <!-- * 3. สร้างคอลัมน์ด้านขวา (Main Content) - กำหนดให้กว้าง 9/12 ส่วน -->
            <div class="col-md-9">
                <!-- * สร้างแถวซ้อนข้างในอีกที เพื่อแบ่งฟอร์มกับรูปภาพ -->
                <!-- <div class="row align-items-center p-3"> -->
                <form method="post" enctype="multipart/form-data" class="row align-items-center p-3">
                {% csrf_token %}
                    <!-- * คอลัมน์สำหรับฟอร์ม -->
                    <div class="col-md-8">
                        <h2 class="fw-bold mb-4">Edit Profile</h2>
                        <!-- <form style="width: 80%;"> -->
                        <div class="mb-3" style="width: 80%;">
                            <label for="firstName" class="form-label fs-5">First name</label>
                            <!-- <input type="text" class="form-control bg-light" id="firstName"> -->
                            {{profileform.first_name}}
                        </div>
                        <div class="mb-3" style="width: 80%;">
                            <label for="lastName" class="form-label fs-5">Last name</label>
                            <!-- <input type="text" class="form-control bg-light" id="lastName"> -->
                            {{profileform.last_name}}
                        </div>
                        <div class="mb-3" style="width: 80%;">
                            <label for="username" class="form-label fs-5">Username</label>
                            <!-- <input type="username" class="form-control bg-light" id="username"> -->
                            {{profileform.username}}
                        </div>
                        <button type="submit" class="btn btn-lg mt-4 btn-custom" style="background-color: #FFBC00;">Confirm</button>
                        <!-- </form> -->
                    </div>

                    <!-- * คอลัมน์สำหรับรูปภาพ -->
                    <div class="col-md-4 d-flex flex-column align-items-center" style="border:none black 1px">
                        <!-- * ทำให้รูปเป็นวงกลมและ responsive -->
                        {% if users.imageurl %} 
                        {% if request_user_image %}
                        <img src="{{ request_user_image.url }}" alt="big-profile" style="aspect-ratio: 1/1; object-fit: cover;" class="img-fluid rounded-circle w-75 m-3">
                        {% else %}
                        <img src="{{ users.imageurl.url }}" alt="big-profile" style="aspect-ratio: 1/1; object-fit: cover;" class="img-fluid rounded-circle w-75 m-3">
                        {% endif %}
                        {% else %}
                        <img src="{% static 'default-profile.png'%}" alt="big-profile" style="aspect-ratio: 1/1; object-fit: cover;" class="img-fluid rounded-circle w-75 m-3">
                        {% endif %}
                        <!-- <img src="/static/test_profile.png" alt="Profile Picture" class="img-fluid rounded-circle w-75"> -->
                        
                        <!-- ! โอ้ย ทำยังไงให้ icon ไปข้างล่างเนี่ย -->
                        <!-- <i class="bi bi-pencil-square fs-4"></i> -->

                        <!-- <input type="file" id="upload-photo" name="profile_image" accept="image/*" style="display: none;"> -->
                        {{profileimageform.imageurl}}
                        <label for="imageupload" 
                            class="btn btn-link p-0"
                            style="cursor: pointer; color: #0d6efd; text-decoration: underline;">
                            Upload a photo
                        </label>

                        <button type="submit" name="action" value="remove_photo" 
                            class="btn btn-link p-0" style="text-decoration: underline; cursor: pointer;">
                            Remove photo
                        </button>

                    </div>
                <!-- </div> -->
                </form>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js" integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y" crossorigin="anonymous"></script>
    
    <script>
    document.getElementById("imageupload").onchange = function() {
        this.form.submit();
    };
    </script>

</body>

</html>